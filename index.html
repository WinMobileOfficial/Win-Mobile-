<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GM Agency - Official</title>
    <style>
        :root { --primary: #ff5252; --gold: #ffd700; --poppo: #ff007f; --bg: #f4f7f6; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); margin: 0; text-align: center; -webkit-user-select: none; user-select: none; scroll-behavior: smooth; }
        .container { max-width: 480px; margin: auto; background: white; padding: 20px; min-height: 100vh; }
        
        /* Poppo Section */
        .poppo-card { border: 3px solid var(--poppo); border-radius: 20px; padding: 15px; margin: 20px 0; background: #fff0f6; position: relative; }
        .agency-code { background: #1a1a1a; color: var(--gold); padding: 10px; border-radius: 10px; font-size: 24px; font-weight: bold; letter-spacing: 3px; margin: 10px 0; }
        
        /* Spin Wheel */
        .wheel-container { position: relative; width: 220px; height: 220px; margin: 20px auto; }
        #wheel { width: 100%; height: 100%; transition: transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99); }
        .wheel-pointer { position: absolute; top: -10px; left: 50%; transform: translateX(-50%); width: 0; height: 0; border-left: 15px solid transparent; border-right: 15px solid transparent; border-top: 25px solid #333; z-index: 10; }

        /* Utility Cards */
        .card { padding: 15px; border-radius: 15px; margin-bottom: 15px; border: 1px solid #eee; background: #fff; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        .btn { width: 100%; padding: 14px; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; margin: 5px 0; text-decoration: none; display: block; }
        .btn-red { background: var(--primary); color: white; }
        .btn-green { background: #1eb41e; color: white; }
        
        /* Footer & Tags */
        footer { background: #1a1a1a; color: white; padding: 30px 10px; margin-top: 30px; border-radius: 25px 25px 0 0; }
        .tag { background: var(--gold); color: #000; padding: 5px 12px; border-radius: 15px; font-size: 11px; font-weight: bold; margin: 3px; cursor: pointer; display: inline-block; }
        .wa-float { position: fixed; bottom: 20px; right: 20px; background: #25d366; color: white; width: 55px; height: 55px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; box-shadow: 0 4px 10px rgba(0,0,0,0.3); z-index: 1000; text-decoration: none; }
    </style>
</head>
<body>

<div class="container">
    <div style="background:#222; color:var(--gold); padding:15px; border-radius:15px;"><h2>GM Agency Official</h2></div>

    <div class="poppo-card">
        <div style="background:var(--poppo); color:white; position:absolute; top:0; right:0; padding:4px 12px; border-radius:0 0 0 15px; font-size:10px;">OFFICIAL</div>
        <h3 style="color:var(--poppo); margin-top:10px;">üåü Poppo Agency Rewards üåü</h3>
        <div class="agency-code">2753578</div>
        <div style="border:2px dashed var(--poppo); padding:10px; border-radius:10px; margin:10px 0;">
            <p style="color:var(--poppo); font-weight:bold; margin:5px 0;">üî• 5,000 Coins Welcome Gift</p>
            <p style="color:#25d366; font-weight:bold; margin:5px 0;">üí∞ 3,000 Daily Rewards</p>
        </div>
        <a href="https://wa.me/923023313131?text=I%20joined%20Agency%202753578" class="btn" style="background:linear-gradient(45deg, #ff007f, #ff5252); color:white;">CLAIM REWARDS NOW üöÄ</a>
    </div>

    <div class="card" id="spin-section">
        <h4>üé° Daily Reward Spin</h4>
        <div class="wheel-container">
            <div class="wheel-pointer"></div>
            <svg id="wheel" viewBox="0 0 200 200">
                <g transform="rotate(-90 100 100)">
                    <path d="M100 100 L200 100 A100 100 0 0 1 130.9 195.1 Z" fill="#ffd700"/><text x="145" y="145" font-size="14">2</text>
                    <path d="M100 100 L130.9 195.1 A100 100 0 0 1 19.1 158.8 Z" fill="#ff5252"/><text x="85" y="165" fill="white">3</text>
                    <path d="M100 100 L19.1 158.8 A100 100 0 0 1 19.1 41.2 Z" fill="#ffffff"/><text x="45" y="105">4</text>
                    <path d="M100 100 L19.1 41.2 A100 100 0 0 1 130.9 4.9 Z" fill="#333"/><text x="85" y="45" fill="white">X</text>
                    <path d="M100 100 L130.9 4.9 A100 100 0 0 1 200 100 Z" fill="#ff007f"/><text x="145" y="65" fill="white">1</text>
                </g>
            </svg>
        </div>
        <button id="spinBtn" class="btn btn-red" onclick="spinWheel()">SPIN NOW</button>
        <p id="timerDisplay" style="color:red; font-weight:bold; display:none;">Next spin in: <span id="timeRemaining"></span></p>
    </div>

    <div class="card" style="background:linear-gradient(135deg, #ffd700, #ffa000); color:white;">
        <h2 style="margin:0;">ü™ô My Coins: <span id="userCoins">0</span></h2>
    </div>

    <div class="card">
        <h4>üéÅ Redeem Coins</h4>
        <p style="font-size:12px;">Minimum: 200 Coins = Rs. 2000</p>
        <button onclick="redeem()" class="btn btn-green">CONVERT TO CASH</button>
    </div>

    <div class="card">
        <h4>üîó Refer & Earn</h4>
        <p style="font-size:12px;">Get 10 Coins per referral</p>
        <div id="refLink" style="background:#eee; padding:10px; border-radius:8px; font-size:11px; margin-bottom:10px;">Loading...</div>
        <button onclick="copyRef()" class="btn btn-red">COPY MY LINK</button>
    </div>

    <div class="card">
        <h4>üîé Check My Status</h4>
        <input type="number" id="statusPhone" placeholder="Enter WhatsApp Number" style="width:80%; padding:10px; border:1px solid #ccc; border-radius:8px;">
        <button onclick="checkStatus()" class="btn btn-red">CHECK NOW</button>
        <div id="statusResult" style="margin-top:10px; font-weight:bold;"></div>
    </div>

    <div id="registration-section" class="card" style="border:2px solid #1eb41e;">
        <h3 style="color:#1eb41e;">Win Mobile Registration</h3>
        <p>Fee: Rs. 1000 | Easypaisa: 03196557461</p>
        <input type="text" id="regName" placeholder="Full Name"><br>
        <input type="number" id="regPhone" placeholder="WhatsApp"><br>
        <input type="text" id="regTid" placeholder="TID"><br>
        <button class="btn btn-green">SUBMIT REGISTRATION</button>
    </div>
</div>

<footer>
    <p>¬© 2026 GM Agency Official</p>
    <div style="margin:15px 0;">
        <a href="about.html" style="color:#ccc; text-decoration:none;">About Us</a> | 
        <a href="privacy.html" style="color:#ccc; text-decoration:none;">Privacy</a> | 
        <a href="terms.html" style="color:#ccc; text-decoration:none;">Terms</a>
    </div>
    <div class="service-tags">
        <span class="tag">Poppo Coins</span>
        <span onclick="document.getElementById('spin-section').scrollIntoView()" class="tag">Daily Rewards</span>
        <span onclick="document.getElementById('registration-section').scrollIntoView()" class="tag">Lucky Draw</span>
    </div>
</footer>

<a href="https://wa.me/923023313131" class="wa-float">WA</a>

<script>
    let coins = parseInt(localStorage.getItem("gm_coins")) || 0;
    const SCRIPT_URL = 'YOUR_GOOGLE_SCRIPT_URL';

    function updateDisplay() {
        document.getElementById("userCoins").innerText = coins;
        const refId = localStorage.getItem("gm_user_id") || "User" + Math.floor(Math.random()*9000);
        if(!localStorage.getItem("gm_user_id")) localStorage.setItem("gm_user_id", refId);
        document.getElementById("refLink").innerText = window.location.origin + window.location.pathname + "?ref=" + refId;
    }

    function spinWheel() {
        const btn = document.getElementById("spinBtn");
        const wheel = document.getElementById("wheel");
        btn.disabled = true;
        wheel.style.transform = `rotate(${3600 + Math.random()*360}deg)`;
        setTimeout(() => {
            coins += 2;
            localStorage.setItem("gm_coins", coins);
            localStorage.setItem("last_spin", new Date().getTime());
            alert("Congrats! You won 2 Coins.");
            location.reload();
        }, 4000);
    }

    function startTimer() {
        const last = localStorage.getItem("last_spin");
        if(last) {
            setInterval(() => {
                const diff = (24 * 60 * 60 * 1000) - (new Date().getTime() - last);
                if(diff > 0) {
                    document.getElementById("spinBtn").disabled = true;
                    document.getElementById("timerDisplay").style.display = "block";
                    const h = Math.floor(diff/(1000*60*60));
                    const m = Math.floor((diff%(1000*60*60))/(1000*60));
                    const s = Math.floor((diff%(1000*60))/1000);
                    document.getElementById("timeRemaining").innerText = `${h}h ${m}m ${s}s`;
                } else {
                    document.getElementById("spinBtn").disabled = false;
                }
            }, 1000);
        }
    }

    function copyRef() {
        navigator.clipboard.writeText(document.getElementById("refLink").innerText);
        alert("Referral link copied!");
    }

    function checkStatus() {
        const phone = document.getElementById("statusPhone").value;
        if(!phone) return alert("Enter Number");
        document.getElementById("statusResult").innerText = "Checking... ‚è≥";
        fetch(`${SCRIPT_URL}?action=getRecords`).then(r => r.json()).then(data => {
            const user = data.records.find(u => u.phone == phone);
            document.getElementById("statusResult").innerText = user ? `Status: ${user.status} ‚úÖ` : "No Record Found ‚ùå";
        });
    }

    window.onload = () => { updateDisplay(); startTimer(); };
</script>
</body>
</html>
